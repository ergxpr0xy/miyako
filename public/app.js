!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},n={},r={},a={}.hasOwnProperty,l=/^\.\.?(\/|$)/,u=function(e,t){for(var n,r=[],a=(l.test(t)?e+"/"+t:t).split("/"),u=0,o=a.length;u<o;u++)n=a[u],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},o=function(e){return e.split("/").slice(0,-1).join("/")},i=function(t){return function(n){var r=u(o(t),n);return e.require(r,t)}},c=function(e,t){var r=null;r=h&&h.createHot(e);var a={id:e,exports:{},hot:r};return n[e]=a,t(a.exports,i(e),a),a.exports},s=function(e){return r[e]?s(r[e]):e},d=function(e,t){return s(u(o(e),t))},f=function(e,r){null==r&&(r="/");var l=s(e);if(a.call(n,l))return n[l].exports;if(a.call(t,l))return c(l,t[l]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};f.alias=function(e,t){r[t]=e};var m=/\.[^.\/]+$/,p=/\/index(\.[^\/]+)?$/,g=function(e){if(m.test(e)){var t=e.replace(m,"");a.call(r,t)&&r[t].replace(m,"")!==t+"/index"||(r[t]=e)}if(p.test(e)){var n=e.replace(p,"");a.call(r,n)||(r[n]=e)}};f.register=f.define=function(e,r){if("object"==typeof e)for(var l in e)a.call(e,l)&&f.register(l,e[l]);else t[e]=r,delete n[e],g(e)},f.list=function(){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e};var h=e._hmr&&new e._hmr(d,f,t,n);f._cache=n,f.hmr=h&&h.wrap,f.brunch=!0,e.require=f}}(),function(){window;require.register("actions/index.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.addImage=function(e,t){return{type:"ADD_IMAGE",id:e,data:t}},e.removeImage=function(e){return{type:"REMOVE_IMAGE",id:e}},e.addAlert=function(e,t){return{type:"ADD_ALERT",url:e,message:t}},e.clearAlert=function(){return{type:"CLEAR_ALERT"}},e.login=function(e){return{type:"LOGIN",user:e}},e.logout=function(){return{type:"LOGOUT"}},e.setValue=function(e,t){return{type:"SET_VALUE",key:e,value:t}}}),require.register("components/App.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=r(a),u=t("./Navbar"),o=r(u),i=t("./Footer"),c=r(i),s=t("../containers/Login"),d=r(s),f=function(e){return e.indexOf("/login")!=-1};e["default"]=function(e){var t=e.location,n=e.children;return l["default"].createElement("div",null,l["default"].createElement(o["default"],null),l["default"].createElement(d["default"],{show:f(t.pathname)}),n,l["default"].createElement(c["default"],null))}}),require.register("components/FBAlbums.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=t("react"),u=r(l),o=t("./Marked"),i=(r(o),function(e){var t=(e.link,e.src),n=e.name;return u["default"].createElement("div",{className:"fb-album-image"},u["default"].createElement("div",{className:"panel panel-default"},u["default"].createElement("div",{className:"panel-body"},u["default"].createElement("img",{className:"panel-image",src:t,alt:n})),u["default"].createElement("div",{className:"panel-footer"},u["default"].createElement("a",{href:t,download:n,target:"_blank",className:"btn btn-default btn-xs"},"Download"),u["default"].createElement("button",{type:"button",className:"btn btn-danger pull-right btn-xs"},"Remove"))))}),c=function(e){var t=e.id,n=e.title,r=e.images;return u["default"].createElement("div",{id:t},u["default"].createElement("h2",null,n),u["default"].createElement("div",{className:"fb-album"},r.map(function(e,t){return u["default"].createElement(i,a({key:t},e))})))};e["default"]=function(e){var t=e.albums;return t&&0!=t.length?u["default"].createElement("div",null,t.map(function(e){return u["default"].createElement(c,a({key:e.id},e))})):null}}),require.register("components/FBImages.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=t("react"),u=r(l),o=t("./Marked"),i=r(o),c=function(e){var t=e.id,n=e.link,r=e.src,a=e.name,l=e.description,o=e.onRemove;return u["default"].createElement("div",{id:t,className:"fb-image"},u["default"].createElement("div",{className:"panel panel-default"},u["default"].createElement("div",{className:"panel-body"},u["default"].createElement("img",{className:"panel-image",src:r,alt:a}),u["default"].createElement(i["default"],{className:"panel-content",content:l})),u["default"].createElement("div",{className:"panel-footer"},u["default"].createElement("a",{href:r,download:a,target:"_blank",className:"btn btn-default"},"Download"),u["default"].createElement("a",{href:n,target:"_blank",className:"btn btn-link"},"View post"),u["default"].createElement("button",{type:"button",className:"btn btn-danger pull-right",onClick:o},"Remove"))))};e["default"]=function(e){var t=e.images,n=e.onRemoveImage;return t&&0!=t.length?u["default"].createElement("div",{className:"image-list"},u["default"].createElement("h2",null,"Facebook Images"),u["default"].createElement("div",{className:"fb-images"},t.map(function(e){return u["default"].createElement(c,a({key:e.id,onRemove:function(){return n(e.id)}},e))}))):null}}),require.register("components/Footer.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=r(a),u=function(){return l["default"].createElement("footer",{id:"footer",className:"footer"},l["default"].createElement("div",{className:"container"},"Created by ",l["default"].createElement("a",{href:"https://tkesgar.com",target:"_blank"},"Ted Kesgar"),".",l["default"].createElement("br",null),"View the source code on ",l["default"].createElement("a",{href:"https://github.com/tkesgar/miyako",target:"_blank"},"GitHub"),".",l["default"].createElement("br",null),"All code is licensed under ",l["default"].createElement("a",{href:"LICENSE"},"MIT License"),"."))};e["default"]=u}),require.register("components/FormAlert.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=r(a),u=t("react-router"),o={DONE:{state:"success",content:function(e){return l["default"].createElement("span",null,l["default"].createElement("strong",null,"Done!")," You can view the result ",l["default"].createElement("a",{href:e},"below"),".")}},PROCESSING:{state:"muted",content:function(e){return l["default"].createElement("span",null,l["default"].createElement("i",{className:"fa fa-circle-o-notch fa-spin fa-fw"})," ",l["default"].createElement("span",null,"Processing your request, please wait..."))}},REQUEST_FAILED:{state:"danger",content:function(e){return l["default"].createElement("span",null,l["default"].createElement("strong",null,"Oops,")," we are unable to get the URL content. The network might be offline, or your browser is blocking the request for security reasons.")}},REQUEST_FAILED_FIREFOX:{state:"danger",content:function(e){return l["default"].createElement("span",null,l["default"].createElement("strong",null,"Oops,")," we are unable to get the URL content. The network might be offline, or Firefox is blocking the request for security reasons.")}},FILE_NOT_IMAGE:{state:"danger",content:function(e){return l["default"].createElement("span",null,l["default"].createElement("strong",null,"Um,")," it seems that this file is not an image, so we are unable to process this URL.")}},FIREBASE_ERROR:{state:"danger",content:function(e){return l["default"].createElement("span",null,l["default"].createElement("strong",null,"Oops,")," we are currently experiencing problems. Please try again later.")}},MUST_LOGIN:{state:"danger",content:function(e){return l["default"].createElement("span",null,"We need you to log in to download this URL. ",l["default"].createElement(u.Link,{to:"/login"},l["default"].createElement("strong",null,"Click here to log in.")))}},URL_NOT_SUPPORTED:{state:"danger",content:function(e){return l["default"].createElement("span",null,l["default"].createElement("strong",null,"Oops,")," it seems that this URL is currently not supported. Please check the link and try again.")}},API_REQUEST_FAILED:{state:"danger",content:function(e){return l["default"].createElement("span",null,l["default"].createElement("strong",null,"Eep,")," our server is unable to download your request. Plese check the link and try again.")}},SERVER_ERROR:{state:"danger",content:function(e){return l["default"].createElement("span",null,l["default"].createElement("strong",null,"Uh-oh,")," it looks like our server is currently experiencing problems. Please try again later.")}},UNKNOWN:{state:"danger",content:function(e){return l["default"].createElement("span",null,l["default"].createElement("strong",null,"Uh-oh,")," something bad has just happened. If you know something, feel free to ",l["default"].createElement("a",{href:"https://github.com/tkesgar/miyako/issues",target:"_blank"},"report this to us"),".")}}};e["default"]=function(e){var t=e.url,n=e.message,r=o[n]||o.UNKNOWN,a=r.state,u=r.content;return l["default"].createElement("p",{className:"text-"+a},u(t))}}),require.register("components/FormInput.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=r(a),u=t("./FormAlert"),o=r(u),i="http://www.redjuicegraphics.com/BBS_hundred_suns_01_r15_Blog700.jpg",c=function(e){var t=e.alert,n=(e.processing,e.onSubmit);return l["default"].createElement("div",{className:"form-url"},l["default"].createElement("h1",null,"Miyako ",l["default"].createElement("small",null,"download photos and images")),l["default"].createElement("form",{onSubmit:n},l["default"].createElement("div",{className:"form-group"},l["default"].createElement("label",{htmlFor:"url"},"Enter URL to download below:"),l["default"].createElement("div",{className:"input-group"},l["default"].createElement("input",{type:"url",name:"url",className:"form-control",placeholder:i}),l["default"].createElement("span",{className:"input-group-btn"},l["default"].createElement("button",{type:"submit",className:"btn btn-primary"},"Download"))))),t?l["default"].createElement(o["default"],{url:t.url,message:t.message}):null)};e["default"]=c}),require.register("components/Home.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=r(a),u=t("../containers/Login"),o=r(u),i=t("../containers/Input"),c=r(i),s=t("../containers/Images"),d=r(s),f=t("../containers/FBImages"),m=r(f),p=t("../containers/FBAlbums"),g=r(p),h=function(e){return e.indexOf("/login")!=-1};e["default"]=function(e){var t=e.location;return l["default"].createElement("div",{className:"container"},l["default"].createElement(o["default"],{show:h(t.pathname)}),l["default"].createElement(c["default"],null),l["default"].createElement(d["default"],null),l["default"].createElement(m["default"],null),l["default"].createElement(g["default"],null))}}),require.register("components/Images.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=t("react"),u=r(l),o=function(e){var t=e.id,n=e.src,r=e.name,a=e.onRemove;return u["default"].createElement("div",{id:t,className:"image"},u["default"].createElement("div",{className:"panel panel-default"},u["default"].createElement("div",{className:"panel-heading"},r),u["default"].createElement("div",{className:"panel-body"},u["default"].createElement("img",{className:"panel-image",src:n,alt:r})),u["default"].createElement("div",{className:"panel-footer"},u["default"].createElement("a",{href:n,download:r,target:"_blank",className:"btn btn-default"},"Download"),u["default"].createElement("button",{type:"button",className:"btn btn-danger pull-right",onClick:a},"Remove"))))};e["default"]=function(e){var t=e.images,n=e.onRemoveImage;return t&&0!=t.length?u["default"].createElement("div",{className:"image-list"},u["default"].createElement("h2",null,"Images"),u["default"].createElement("div",{className:"images"},t.map(function(e){return u["default"].createElement(o,a({key:e.id,onRemove:function(){return n(e.id)}},e))}))):null}}),require.register("components/LoginModal.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=r(a),u=t("react-bootstrap/lib/Modal"),o=r(u),i=function(){return window.history.back()};e["default"]=function(e){var t=e.user,n=e.show,r=e.onLogin,a=e.errorLogin;return n&&t&&history.pushState({},"","/"),l["default"].createElement(o["default"],{show:!t&&n,onHide:i},l["default"].createElement(o["default"].Header,{closeButton:!0},l["default"].createElement(o["default"].Title,null,"Login")),l["default"].createElement(o["default"].Body,null,l["default"].createElement("p",null,"We need you to log in to download images from Facebook."),l["default"].createElement("button",{className:"btn btn-primary",onClick:r},l["default"].createElement("i",{className:"fa fa-fw fa-facebook-official"})," Log in with Facebook"),a),l["default"].createElement(o["default"].Footer,null,l["default"].createElement("button",{className:"btn btn-default",onClick:i},"Close")))}}),require.register("components/Marked.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=t("react"),u=r(l),o=t("marked"),i=r(o),c=function(e){return(0,i["default"])(e,{breaks:!0,sanitize:!0,smartypants:!0})};e["default"]=function(e){return u["default"].createElement("div",a({},e,{dangerouslySetInnerHTML:{__html:c(e.content)}}))}}),require.register("components/Navbar.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=r(a),u=t("react-router"),o=t("../containers/NavbarLogin"),i=r(o);e["default"]=function(){return l["default"].createElement("nav",{className:"navbar navbar-default navbar-static-top"},l["default"].createElement("div",{className:"container"},l["default"].createElement("div",{className:"navbar-header"},l["default"].createElement("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#navbar"},l["default"].createElement("span",{className:"sr-only"},"Toggle navigation"),l["default"].createElement("span",{className:"icon-bar"}),l["default"].createElement("span",{className:"icon-bar"}),l["default"].createElement("span",{className:"icon-bar"})),l["default"].createElement(u.Link,{className:"navbar-brand",to:"/"},"Miyako")),l["default"].createElement("div",{className:"collapse navbar-collapse",id:"navbar"},l["default"].createElement("ul",{className:"nav navbar-nav"},l["default"].createElement("li",null,l["default"].createElement("a",{href:"https://github.com/tkesgar/miyako",target:"_blank"},"View on GitHub"))),l["default"].createElement(i["default"],null))))}}),require.register("config.json",function(e,t,n){n.exports={env:"BRUNCH_ENVIRONMENT",endpoint:"/api",firebase:{apiKey:"AIzaSyDApJOhS407dti-RZ0630pJxcNdvt1Yngg",authDomain:"miyako-4f2df.firebaseapp.com",databaseURL:"https://miyako-4f2df.firebaseio.com",storageBucket:"miyako-4f2df.appspot.com",messagingSenderId:"543115397544"}}}),require.register("containers/FBAlbums.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react-redux"),l=t("../actions"),u=t("../components/FBAlbums"),o=r(u),i=t("js-md5"),c=(r(i),function(e){return e.filter(function(e){return"facebook"===e.data.type&&"album"===e.data.result.type}).map(function(e){return Object.assign({id:e.id},e.data.result)})}),s=function(e){return{albums:c(e.images)}},d=function(e){return{onRemoveAlbum:function(t){return e((0,l.removeImage)(t))}}};e["default"]=(0,a.connect)(s,d)(o["default"])}),require.register("containers/FBImages.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react-redux"),l=t("../actions"),u=t("../components/FBImages"),o=r(u),i=function(e){return e.filter(function(e){return"facebook"===e.data.type&&"image"===e.data.result.type}).map(function(e){return Object.assign({id:e.id},e.data.result)})},c=function(e){return{images:i(e.images)}},s=function(e){return{onRemoveImage:function(t){return e((0,l.removeImage)(t))}}};e["default"]=(0,a.connect)(c,s)(o["default"])}),require.register("containers/Images.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react-redux"),l=t("../actions"),u=t("../components/Images"),o=r(u),i=function(e){return e.filter(function(e){return["direct","zerochan"].indexOf(e.data.type)!=-1}).map(function(e){return Object.assign({id:e.id},e.data.result)})},c=function(e){return{images:i(e.images)}},s=function(e){return{onRemoveImage:function(t){return e((0,l.removeImage)(t))}}};e["default"]=(0,a.connect)(c,s)(o["default"])}),require.register("containers/Input.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react-redux"),l=t("../actions"),u=t("../lib/extract"),o=r(u),i=t("../components/FormInput"),c=r(i),s=t("js-md5"),d=r(s),f=function(e){return{alert:e.alert,processing:e.values.processing}},m=function(e){return{onSubmit:function(t){t.preventDefault(),e((0,l.clearAlert)()),e((0,l.setValue)("processing",!0));var n=t.target.elements.url.value.trim();n&&(e((0,l.addAlert)(n,"PROCESSING")),(0,o["default"])(n).then(function(t){console.log("Successful",t);var r=(0,d["default"])(n);e((0,l.addImage)(r,t)),e((0,l.addAlert)("#"+r,"DONE"))})["catch"](function(t){console.log("Failed",t),e((0,l.addAlert)(n,t.message)),e((0,l.setValue)("processing",!1))}))}}};e["default"]=(0,a.connect)(f,m)(c["default"])}),require.register("containers/Login.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=(r(a),t("react-bootstrap/lib/Modal")),u=(r(l),t("react-redux")),o=t("firebase"),i=r(o),c=t("../actions"),s=t("../components/LoginModal"),d=r(s),f=function(e){return{user:e.user,errorLogin:e.values.ERROR_LOGIN}},m=function(e){return{onLogin:function(){var t=new i["default"].auth.FacebookAuthProvider;i["default"].auth().signInWithPopup(t)["catch"](function(t){return e((0,c.setValue)(t))})}}};e["default"]=(0,u.connect)(f,m)(d["default"])}),require.register("containers/NavbarLogin.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("react"),l=r(a),u=t("firebase"),o=r(u),i=t("react-router"),c=t("react-redux"),s=t("../actions"),d=function(e){return{name:e.user?e.user.displayName:null}},f=function(e){return{onLogout:function(){o["default"].auth().signOut().then(function(){e((0,s.logout)())})["catch"](function(){console.log("Failed to log out.")})}}},m=function(e){var t=e.name,n=e.onLogout;return t?l["default"].createElement("ul",{className:"nav navbar-nav navbar-right"},l["default"].createElement("li",null,l["default"].createElement("p",{className:"navbar-text"},"Logged in as ",t)),l["default"].createElement("li",null,l["default"].createElement("button",{type:"button",className:"btn btn-default btn-sm navbar-btn",onClick:n},"Log out"))):l["default"].createElement("ul",{className:"nav navbar-nav navbar-right"},l["default"].createElement("li",null,l["default"].createElement(i.Link,{to:"/login"},"Login")))};e["default"]=(0,c.connect)(d,f)(m)}),require.register("lib/extract.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=t("./mods/direct"),u=r(l),o=t("./mods/facebook"),i=r(o),c=t("../config"),s=t("superagent"),d=r(s),f=t("main"),m={login:!1,query:{}},p={facebook:i["default"]},g=function(e){return new Promise(function(t,n){var r=function(e){return t({type:c,result:e})},l=Object.keys(p),o=l.find(function(t){return p[t].pattern.test(e)})||null,i=o?p[o]:u["default"],c=o||"direct";"object"===a(i.run)?h(e,c,i.run,r,n):i.run(e,r,n)})},h=function(e,t,n,r,a){var l=function(e){e.end(function(e,t){if(e)a(new Error("SERVER_ERROR"));else{var n=t.body;"OK"===n.status?r(n.result):a(n.result)}})},u=Object.assign({},m,n),o=d["default"].get(c.endpoint).query({url:e,type:t}).query(u.query);if(u.login){var i=(0,f.getState)().user;if(u.login&&!i)return void a(new Error("MUST_LOGIN"));(0,f.getToken)().then(function(e){o.query({token:e.accessToken}),l(o)})["catch"](function(e){a(new Error("FIREBASE_ERROR"))})}else l(o)};e["default"]=g}),require.register("lib/mods/direct.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.pattern=e.run=void 0;var a=t("superagent"),l=r(a),u=t("bowser"),o=r(u),i=e.run=function(e,t,n){var r=e,a=/.*\/(.*\.(jpeg|jpg|png|gif))[\/?#]?/i.exec(e);if(a){var u=a[1];t({src:r,name:u})}else l["default"].get(e).end(function(a,l){if(a)n(o["default"].firefox?new Error("REQUEST_FAILED_FIREFOX",a):new Error("REQUEST_FAILED",a));else{var u=/image\/(.*)/i.exec(l.type);if(u){var i=/.*\/([^\/?#]*)[\/?#]/i.exec(e)[1],c=u[1],s=i+"."+c;t({src:r,name:s})}else n(new Error("FILE_NOT_IMAGE"))}})},c=e.pattern=/.*/i;e["default"]={pattern:c,run:i}}),require.register("lib/mods/facebook.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={login:!0},a=/facebook\.com/i;e["default"]={pattern:a,run:r}}),require.register("main.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0}),e.getToken=e.getState=void 0;var a=t("react"),l=r(a),u=t("react-dom"),o=t("redux"),i=t("react-redux"),c=t("react-router"),s=t("firebase"),d=r(s),f=t("./actions"),m=t("./config"),p=r(m),g=t("./reducer"),h=r(g),b=t("./components/App"),v=r(b),E=t("./components/Home"),y=r(E),_=[],w=void 0;w=(0,o.createStore)(h["default"],o.applyMiddleware.apply(void 0,_)),(0,u.render)(l["default"].createElement(i.Provider,{store:w},l["default"].createElement(c.Router,{history:c.browserHistory},l["default"].createElement(c.Route,{path:"/",component:v["default"]},l["default"].createElement(c.IndexRoute,{component:y["default"]}),l["default"].createElement(c.Route,{path:"login",component:y["default"]})))),document.getElementById("app")),d["default"].initializeApp(p["default"].firebase);var k=d["default"].auth();k.onAuthStateChanged(function(e){e?w.dispatch((0,f.login)(e)):w.dispatch(logout(e))});e.getState=function(){return w.getState()},e.getToken=function(e){return e?k.getToken().then(e):k.getToken()}}),require.register("md/about.md",function(e,t,n){var r='<h1 id="miyako">Miyako</h1>\n<p><img src="https://i.imgur.com/yeiiB.gif" alt="Miyako"></p>\n<p>Miyako is a simple app to download photos and photo albums from various URLs.</p>\n<p>I create this to make downloading various reference photos from Internet easier. Downloading all of them one-by-one is a complete waste of time.</p>\n<p>Also, I want to learn React and Redux.</p>\n<h2 id="supported-urls">Supported URLs</h2>\n<ul>\n<li>Direct link (<code>http://example.com/image.jpg</code>)</li>\n<li>Facebook photo (<code>https://www.facebook.com/example/123/456/?type=3&amp;theater</code>)</li>\n<li>Facebook album (<code>https://www.facebook.com/example/photos/?tab=album&amp;album_id=123</code>)</li>\n</ul>\n<h2 id="notes">Notes</h2>\n<ul>\n<li>In order to download Facebook photos, you need to login with your Facebook account. This is necessary to get access token for Facebook API.</li>\n<li>Firefox has additional security measures:<ul>\n<li>If you get error <code>Request has been terminated Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.</code>, it is possible that <a href="https://developer.mozilla.org/en-US/Firefox/Privacy/Tracking_Protection">Tracking Protection</a> turned on.</li>\n</ul>\n</li>\n<li>It is difficult to perform client-side scraping because of various security issues, so we have to either find APIs or write a backend. I choose the former for now, but for sites like Zerochan or Deviantart (who don&#39;t have any API, as far as I am aware) I might end up creating a backend anyway.</li>\n</ul>\n<h2 id="todo">Todo</h2>\n<ul>\n<li>[ ] Add more URL support<ul>\n<li>[ ] Twitter (possible with Twitter API)</li>\n<li>[ ] Zerochan</li>\n<li>[ ] Deviantart</li>\n<li>[ ] pixiv (there is a bunch of npm packages, but I haven&#39;t tested it yet)</li>\n</ul>\n</li>\n<li>[ ] Testing</li>\n<li>[ ] Documentation</li>\n</ul>\n<h2 id="miyako-who-">Miyako who?</h2>\n<p>From <a href="https://en.wikipedia.org/wiki/Hidamari_Sketch">Hidamari Sketch</a>.</p>\n<p><img src="http://www.ilbazardimari.net/wp-content/uploads/Hidamari-sketch-6.gif" alt="Miyako laughing"></p>\n<h2 id="licence">Licence</h2>\n<p><a href="LICENSE">MIT License</a></p>\n';"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n&&n&&n.exports&&(n.exports=r)}),require.register("reducer/alert.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case"ADD_ALERT":return{url:t.url,message:t.message};case"CLEAR_ALERT":return null;default:return e}}}),require.register("reducer/images.js",function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"ADD_IMAGE":var n=t.id,r=t.data;return{id:n,data:r};default:return e}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"ADD_IMAGE":return[].concat(r(e),[a(void 0,t)]);case"REMOVE_IMAGE":return e.filter(function(e){return e.id!=t.id});default:return e}};e["default"]=l}),require.register("reducer/index.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var a=t("redux"),l=t("./images"),u=r(l),o=t("./values"),i=r(o),c=t("./alert"),s=r(c),d=t("./user"),f=r(d);e["default"]=(0,a.combineReducers)({values:i["default"],images:u["default"],alert:s["default"],user:f["default"]})}),require.register("reducer/user.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case"LOGIN":return t.user;case"LOGOUT":return null;default:return e}}}),require.register("reducer/values.js",function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"SET_VALUE":return Object.assign({},e,r({},t.key,t.value));default:return e}};e["default"]=a}),require.register("test/direct.js",function(e,t,n){"use strict";var r=t("../lib/mods/direct"),a=chai.expect,l={"url .gif":{url:"http://yahallo.com/test.gif",name:"test"},"url .jpeg":{url:"http://yahallo.com/test.jpeg",name:"test"},"url .jpg":{url:"http://yahallo.com/test.jpg",name:"test"},"url .png":{url:"http://yahallo.com/test.png",name:"test"},"url with extra slash":{url:"http://yahallo.com/test.png/revision/latest",name:"test"},"url with extra slash with query":{url:"http://yahallo.com/test.png/revision/latest?resize=1200&cache=abc",name:"test"},"url with query":{url:"http://yahallo.com/test.png?resize=1200&cache=abc",name:"test"},"url without extension":{url:"http://yahallo.com/test",name:"test"},"url without extension with query":{url:"http://yahallo.com/test?resize=1200&cache=abc",name:"test"},"url without protocol":{url:"yahallo.com/test.png#123",name:"test"},"url with double slash":{url:"//yahallo.com/test.png#123",name:"test"}},u={string:"Yahallo!"};describe("direct",function(){describe("type",function(){it("should return promise",function(){a((0,r.run)("http://yahallo.com/test.jpg")).to.be.a("promise")}),it("should resolve with #src and #name string",function(){return(0,r.run)("http://yahallo.com/test.jpg").then(function(e){var t=e.name,n=e.src;a(t).to.be.a("string"),a(n).to.be.a("string")})}),it("should reject with #message",function(){return(0,r.run)("yahallo")["catch"](function(e){var t=e.message;a(t).to.be.a("string")})})}),describe("pattern",function(){var e=function(e){var t=l[e].url;it("should accept "+e,function(){a(t).to.match(r.pattern)})};for(var t in l)e(t);var n=function(e){var t=u[e].url;it("should reject "+e,function(){a(t).not.to.match(r.pattern)})};for(var o in u)n(o)}),describe("src",function(){it("should return the url",function(){var e="http://yahallo.com/test.png";return(0,r.run)(e).then(function(t){var n=t.src;a(n).to.equal(e)})})}),describe("name",function(){var e=function(e){var t=l[e];it("should extract filename from "+e,function(){return(0,r.run)(t.url).then(function(e){var n=e.name;a(n).to.equal(t.name)})})};for(var t in l)e(t)})})}),require.register("test/extract.js",function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=t("../lib/extract"),l=r(a),u=chai.expect;describe("extract",function(){describe("types",function(){it("should return promise",function(){u((0,l["default"])("http://yahallo.com/test.jpg")).to.be.a("promise")}),it("should reject with Error if fails",function(){return(0,l["default"])("yahallo")["catch"](function(e){u(e).to.be["instanceof"](Error)})})})})}),require.register("test/index.js",function(e,t,n){"use strict";t("./extract"),t("./direct")}),require.register("___globals___",function(e,t,n){})}(),require("___globals___");